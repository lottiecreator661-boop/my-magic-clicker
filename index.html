<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TON Empire Elite Edition</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --accent: #0098EA; --bg: #0b0f1a; --glass: rgba(255, 255, 255, 0.07); }
        body { background: var(--bg); color: #fff; text-align: center; font-family: 'Inter', sans-serif; margin: 0; overflow: hidden; display: flex; flex-direction: column; height: 100vh; }
        
        /* Elite Design */
        .top-bar { background: rgba(11, 15, 26, 0.8); backdrop-filter: blur(20px); padding: 15px 20px; display: flex; justify-content: space-between; border-bottom: 1px solid var(--glass); }
        .balance-val { font-size: 24px; font-weight: 900; text-shadow: 0 0 15px var(--accent); }
        .online-tag { font-size: 11px; color: #10b981; font-weight: bold; background: rgba(16, 185, 129, 0.1); padding: 2px 8px; border-radius: 10px; }

        .tab-content { flex-grow: 1; display: none; flex-direction: column; align-items: center; padding: 20px; overflow-y: auto; padding-bottom: 120px; }
        .active-tab { display: flex; }

        /* Coin */
        #coin { width: 200px; height: 200px; background: linear-gradient(135deg, #0098EA, #00f2ff); border-radius: 50%; margin: 30px auto; display: flex; align-items: center; justify-content: center; font-size: 60px; cursor: pointer; box-shadow: 0 0 40px rgba(0, 152, 234, 0.5); position: relative; border: 6px solid rgba(255,255,255,0.1); }
        
        /* Games */
        .wheel-container { width: 100%; height: 80px; background: #161b2a; border-radius: 20px; overflow: hidden; margin: 20px 0; border: 2px solid var(--accent); position: relative; }
        .wheel-line { display: flex; position: absolute; left: 0; transition: transform 4s cubic-bezier(0.15, 0, 0.15, 1); }
        .wheel-item { min-width: 60px; height: 60px; margin: 10px; background: var(--accent); border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px; }
        
        .mines-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; margin: 15px 0; }
        .m-cell { width: 55px; height: 55px; background: #1e293b; border-radius: 12px; display: flex; align-items: center; justify-content: center; border: 1px solid var(--glass); }

        /* UI Elements */
        .glass-card { background: var(--glass); border: 1px solid rgba(255,255,255,0.1); border-radius: 24px; padding: 18px; width: 100%; margin-bottom: 12px; box-sizing: border-box; }
        .btn { border: none; padding: 15px; border-radius: 15px; font-weight: 800; color: #fff; cursor: pointer; width: 100%; }
        .btn-blue { background: linear-gradient(90deg, #0098EA, #00c2ff); }
        .input-dark { background: #161b2a; border: 1px solid #2d3748; color: #fff; padding: 14px; border-radius: 14px; width: 90%; margin-bottom: 10px; text-align: center; }

        .bottom-nav { background: rgba(11, 15, 26, 0.95); display: flex; justify-content: space-around; padding: 12px 0 35px 0; position: fixed; bottom: 0; width: 100%; border-top: 1px solid var(--glass); }
        .nav-item { color: #64748b; font-size: 11px; cursor: pointer; }
        .nav-item.active { color: var(--accent); }
        
        .vip-badge { background: linear-gradient(45deg, #ffd700, #ffa500); color: #000; padding: 2px 10px; border-radius: 10px; font-size: 10px; font-weight: 900; }
    </style>
</head>
<body>

    <div class="top-bar">
        <div style="text-align: left;">
            <div class="online-tag">‚óè ONLINE: <span id="online-cnt">...</span></div>
            <div class="balance-val"><span id="balance">0.00</span> <small style="font-size:10px">TON</small></div>
        </div>
        <div style="text-align: right;"><small style="color:#94a3b8">PPS</small><div id="pps" style="color:#34d399; font-weight:bold;">+0.00</div></div>
    </div>

    <div id="tab-farm" class="tab-content active-tab">
        <div id="coin">üíé</div>
        <div style="font-size: 32px; font-weight: 900;">‚ö° <span id="energy">250</span></div>
        <div id="energy-timer" style="font-size:12px; color:#94a3b8; margin-top:5px;">–ó–∞—Ä—è–∂–µ–Ω–æ</div>
    </div>

    <div id="tab-games" class="tab-content">
        <div id="g-list" style="width:100%">
            <div class="glass-card" onclick="uiG('mines')">üí£ –ú–ò–ù–´</div>
            <div class="glass-card" onclick="uiG('wheel')" style="border-color:#f59e0b">üé° PvP –†–£–õ–ï–¢–ö–ê</div>
        </div>
        <div id="g-play" style="display:none; width:100%">
            <h2 id="g-title">–ò–ì–†–ê</h2>
            <div id="g-area"></div>
            <div id="g-info" style="margin:10px; color:#f59e0b; font-weight:bold;"></div>
            <button id="btn-cashout" class="btn btn-blue" style="display:none; background:#f59e0b; margin-bottom:10px;" onclick="doCashout()">–ó–ê–ë–†–ê–¢–¨</button>
            <button class="btn" style="background:#334155" onclick="closeG()">–ù–ê–ó–ê–î</button>
        </div>
    </div>

    <div id="tab-profile" class="tab-content">
        <div class="glass-card">
            <h3>–ú–û–ô –ü–†–û–§–ò–õ–¨ <span id="vip-status"></span></h3>
            <p>–ö–ª–∏–∫–æ–≤: <span id="stat-clk">0</span></p>
            <button class="btn btn-blue" onclick="claimDaily()">üéÅ –ï–ñ–ï–î–ù–ï–í–ù–´–ô –ë–û–ù–£–°</button>
        </div>
        <div class="glass-card">
            <h4>–ö–í–ï–°–¢–´</h4>
            <div id="quests-box"></div>
        </div>
        <div id="admin-panel" style="display:none; width:100%">
            <div class="glass-card" style="border-color: #ef4444;">
                <h4>–ê–î–ú–ò–ù-–ü–ê–ù–ï–õ–¨</h4>
                <input id="adm-sum" class="input-dark" type="number" placeholder="–°—É–º–º–∞">
                <button class="btn" style="background:#ef4444" onclick="addMoney()">–í–´–î–ê–¢–¨ TON</button>
            </div>
        </div>
    </div>

    <div class="bottom-nav">
        <div class="nav-item active" onclick="switchT('farm', this)"><b>‚õè</b><br>–§–∞—Ä–º</div>
        <div class="nav-item" onclick="switchT('games', this)"><b>üé≤</b><br>–ò–≥—Ä—ã</div>
        <div class="nav-item" onclick="switchT('profile', this)"><b>üë§</b><br>–ü—Ä–æ—Ñ–∏–ª—å</div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        let userId = tg.initDataUnsafe?.user?.id || 0;
        let adminId = 12345678; // –ó–ê–ú–ï–ù–ò –ù–ê –°–í–û–ô ID

        function n(v, f=0) { let r = parseFloat(v); return isNaN(r) ? f : r; }

        let today = new Date().toLocaleDateString();
        let db = JSON.parse(localStorage.getItem('ton_elite_v10')) || {
            bal: 100, nrg: 250, pps: 0, clk: 0, last: Date.now(),
            vip: false, jackpot_bet: 0, q_date: today, q_list: [false, false]
        };

        if(db.q_date !== today) { db.q_list = [false, false]; db.q_date = today; }

        function save() { localStorage.setItem('ton_elite_v10', JSON.stringify(db)); }

        function update() {
            let now = Date.now();
            let dt = (now - db.last) / 1000;
            db.bal = n(db.bal + (n(db.pps) * dt));
            
            let maxN = db.vip ? 1000 : 250;
            if(db.nrg < maxN) {
                db.nrg = Math.min(maxN, db.nrg + (dt * 0.25));
                let rem = Math.floor((maxN - db.nrg) / 0.25);
                document.getElementById('energy-timer').innerText = `–§—É–ª–ª —á–µ—Ä–µ–∑: ${Math.floor(rem/60)}:${rem%60 < 10 ? '0'+rem%60 : rem%60}`;
            } else { document.getElementById('energy-timer').innerText = "–ó–∞—Ä—è–∂–µ–Ω–æ"; }

            db.last = now;
            document.getElementById('balance').innerText = n(db.bal).toFixed(2);
            document.getElementById('pps').innerText = "+" + n(db.pps).toFixed(2);
            document.getElementById('energy').innerText = Math.floor(n(db.nrg));
            document.getElementById('stat-clk').innerText = db.clk;
            document.getElementById('online-cnt').innerText = Math.floor(Math.random() * 40) + 800;
            
            if(userId == adminId) document.getElementById('admin-panel').style.display = 'block';
            if(db.vip) document.getElementById('vip-status').innerHTML = '<span class="vip-badge">VIP</span>';

            renderQuests();
            save();
        }

        // –ö–õ–ò–ö–ï–†
        document.getElementById('coin').onclick = (e) => {
            if(db.nrg >= 1) {
                db.nrg--; db.clk++; db.bal += 0.5;
                update();
            }
        };

        // –î–ñ–ï–ö–ü–û–¢ (–ë–ï–ó –°–ì–û–†–ê–ù–ò–Ø)
        function betWheel() {
            let b = n(document.getElementById('wb').value);
            if(b < 1 || b > db.bal) return alert("–ú–∞–ª–æ TON!");
            db.bal -= b; db.jackpot_bet = b; save();
            restoreW();
            setTimeout(() => { if(db.jackpot_bet > 0) startWC(); }, 5000);
        }
        function restoreW() {
            let p = document.getElementById('w-pot'); if(p) p.innerText = `–ë–∞–Ω–∫: ${(db.jackpot_bet * 1.9).toFixed(2)} TON`;
            let s = document.getElementById('w-status'); if(s) s.innerText = "–û–∂–∏–¥–∞–Ω–∏–µ —Å–æ–ø–µ—Ä–Ω–∏–∫–∞...";
            let i = document.getElementById('w-ctrl'); if(i) i.style.display = 'none';
        }
        function startWC() {
            let s = 10;
            let it = setInterval(() => {
                let st = document.getElementById('w-status'); if(!st) { clearInterval(it); return; }
                st.innerText = `–ù–∞—á–∞–ª–æ —á–µ—Ä–µ–∑ ${s}—Å`; s--;
                if(s < 0) { clearInterval(it); runW(); }
            }, 1000);
        }
        function runW() {
            const l = document.getElementById('w-line'); if(!l) return;
            l.style.transform = `translateX(-${Math.floor(Math.random()*1200)+1000}px)`;
            setTimeout(() => {
                let win = db.jackpot_bet * 1.9;
                alert("üéâ –ü–û–ë–ï–î–ê: " + win.toFixed(2));
                db.bal += win; db.jackpot_bet = 0; save();
                closeG(); update();
            }, 4500);
        }

        // –ò–ù–¢–ï–†–§–ï–ô–° –ò–ì–†
        function uiG(t) {
            document.getElementById('g-list').style.display = 'none';
            document.getElementById('g-play').style.display = 'block';
            let area = document.getElementById('g-area');
            if(t === 'wheel') {
                document.getElementById('g-title').innerText = "PvP –†–£–õ–ï–¢–ö–ê";
                area.innerHTML = `
                    <div class="wheel-container"><div id="w-line" class="wheel-line"></div></div>
                    <div id="w-status" style="color:#10b981">–ñ–¥–µ–º –∏–≥—Ä–æ–∫–æ–≤...</div>
                    <div id="w-pot" style="font-size:26px; margin:15px;">0.00 TON</div>
                    <div id="w-ctrl"><input type="number" id="wb" class="input-dark" placeholder="–°—Ç–∞–≤–∫–∞"><button class="btn btn-blue" onclick="betWheel()">–ò–ì–†–ê–¢–¨</button></div>
                `;
                const l = document.getElementById('w-line');
                for(let i=0; i<45; i++) l.innerHTML += `<div class="wheel-item">${['üíé','üëë','üî•','üí∞'][i%4]}</div>`;
                if(db.jackpot_bet > 0) restoreW();
            } else if(t === 'mines') {
                area.innerHTML = `<input type="number" id="mb" class="input-dark" placeholder="–°—Ç–∞–≤–∫–∞"><button class="btn btn-blue" onclick="startM()">–ò–ì–†–ê–¢–¨</button><div id="m-grid" class="mines-grid"></div>`;
            }
        }

        // –ú–ò–ù–´ (–¢–í–û–ò –†–û–î–ù–´–ï)
        let cur = { active: false, bet: 0, mult: 1 };
        function startM() {
            let b = n(document.getElementById('mb').value); if(b < 1 || b > db.bal) return;
            db.bal -= b; cur = { active: true, bet: b, mult: 1, data: Array(25).fill(false) };
            for(let i=0; i<3; i++) cur.data[Math.floor(Math.random()*25)] = true;
            let grid = document.getElementById('m-grid'); grid.innerHTML = '';
            for(let i=0; i<25; i++) {
                let d = document.createElement('div'); d.className = 'm-cell'; d.innerText = '?';
                d.onclick = () => {
                    if(!cur.active || d.innerText !== '?') return;
                    if(cur.data[i]) { d.innerText='üí£'; d.style.background='#ef4444'; cur.active=false; document.getElementById('btn-cashout').style.display='none'; }
                    else { d.innerText='üíé'; d.style.background='#10b981'; cur.mult += 0.5; document.getElementById('g-info').innerText=`–ö—É—à: ${(cur.bet*cur.mult).toFixed(2)}`; document.getElementById('btn-cashout').style.display='block'; }
                }; grid.appendChild(d);
            }
            update();
        }

        // –ê–î–ú–ò–ù–ö–ê
        function addMoney() { let s = n(document.getElementById('adm-sum').value); db.bal += s; update(); alert("–í—ã–¥–∞–Ω–æ " + s); }

        function renderQuests() {
            let b = document.getElementById('quests-box'); b.innerHTML = '';
            const qs = [{t:"–°–¥–µ–ª–∞—Ç—å 100 –∫–ª–∏–∫–æ–≤", v:100, r:10}, {t:"–ù–∞–±—Ä–∞—Ç—å 500 TON", v:500, r:50}];
            qs.forEach((q, i) => {
                let p = (i===0 ? db.clk : db.bal); let can = !db.q_list[i] && p >= q.v;
                b.innerHTML += `<div style="display:flex; justify-content:space-between; margin-bottom:10px;"><span>${q.t}</span><button onclick="claimQ(${i}, ${can})" class="btn" style="width:auto; padding:5px 15px; background:${db.q_list[i]?'#334155':'#10b981'}">${db.q_list[i]?'‚úÖ':'–í–ó–Ø–¢–¨'}</button></div>`;
            });
        }
        function claimQ(i, c) { if(c) { db.q_list[i]=true; db.bal += 50; update(); } }
        function claimDaily() { if(Date.now() - db.daily > 86400000){ db.bal += 15; db.daily = Date.now(); alert("–ë–æ–Ω—É—Å –ø–æ–ª—É—á–µ–Ω!"); update(); } }
        function switchT(id, el) { document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active-tab')); document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active')); document.getElementById('tab-' + id).classList.add('active-tab'); el.classList.add('active'); closeG(); }
        function closeG() { document.getElementById('g-list').style.display = 'block'; document.getElementById('g-play').style.display = 'none'; document.getElementById('g-info').innerText = ''; cur.active = false; }
        function doCashout() { if(!cur.active) return; db.bal += cur.bet * cur.mult; cur.active = false; closeG(); update(); }

        setInterval(update, 1000);
        update();
    </script>
</body>
</html>
