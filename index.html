<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TON EMPIRE: LADDER & BJ EDITION</title>
    <style>
        :root { --blue: #00d2ff; --neon: #00f2ff; --glass: rgba(255, 255, 255, 0.07); --gold: #ffd700; }
        body { background: #020408; color: white; font-family: 'Segoe UI', sans-serif; margin: 0; overflow: hidden; height: 100vh; }
        
        .header { padding: 15px; display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.8); border-bottom: 1px solid var(--blue); }
        .balance { font-size: 28px; font-weight: 900; color: #fff; text-shadow: 0 0 15px var(--blue); }

        .tab-content { display: none; padding: 20px; height: 78vh; overflow-y: auto; flex-direction: column; align-items: center; padding-bottom: 120px; }
        .active { display: flex; }

        #coin { width: 170px; height: 170px; background: linear-gradient(135deg, var(--blue), #3a7bd5); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 60px; box-shadow: 0 0 30px var(--blue); border: 4px solid #fff; cursor: pointer; margin-top: 20px; }
        
        .card { background: var(--glass); border: 1px solid rgba(0, 210, 255, 0.2); border-radius: 18px; padding: 15px; margin: 10px 0; width: 100%; box-sizing: border-box; backdrop-filter: blur(5px); }
        .btn-gold { background: linear-gradient(90deg, #ffd700, #ff8c00); border: none; color: #000; padding: 12px; border-radius: 12px; font-weight: 900; width: 100%; cursor: pointer; margin-top: 5px; }
        .btn-blue { background: linear-gradient(90deg, var(--blue), #3a7bd5); border: none; color: #fff; padding: 12px; border-radius: 12px; font-weight: bold; width: 100%; cursor: pointer; }
        
        /* –ê–Ω–∏–º–∞—Ü–∏—è –∫–µ–π—Å–∞ */
        #case-anim { font-size: 40px; height: 60px; display: none; align-items: center; justify-content: center; overflow: hidden; border: 2px solid var(--gold); border-radius: 10px; margin: 10px 0; background: #000; }
        .rolling { animation: roll 0.5s infinite; }
        @keyframes roll { 0% { transform: translateY(-50px); } 100% { transform: translateY(50px); } }

        /* –ò–≥—Ä—ã */
        .ladder-row { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 5px; width: 100%; }
        .mines-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 8px; }
        .cell { background: rgba(255,255,255,0.05); height: 50px; border-radius: 8px; border: 1px solid var(--blue); display: flex; align-items: center; justify-content: center; font-size: 20px; }

        .menu { position: fixed; bottom: 0; width: 100%; display: flex; background: rgba(5, 10, 20, 0.95); padding: 15px 0 35px; border-top: 1px solid var(--blue); }
        .menu-item { flex: 1; text-align: center; color: #555; font-size: 10px; font-weight: bold; }
        .menu-item.active-nav { color: var(--blue); }
        .menu-item b { font-size: 22px; display: block; }
        
        input { background: #000; border: 1px solid var(--blue); color: #fff; padding: 10px; border-radius: 8px; width: 100%; box-sizing: border-box; margin: 5px 0; }
    </style>
</head>
<body>

<div class="header">
    <div class="balance"><span id="bal">0</span> TON</div>
    <div id="vip-badge"></div>
</div>

<div id="farm" class="tab-content active">
    <div id="coin">üíé</div>
    <div style="width: 85%; margin-top: 30px;">
        <div style="display:flex; justify-content:space-between; font-size:12px;"><span>‚ö° –≠–ù–ï–†–ì–ò–Ø</span><span id="nrg-txt">0/0</span></div>
        <div style="width:100%; height:8px; background:#111; border-radius:10px; margin-top:5px;"><div id="nrg-fill" style="height:100%; background:var(--blue); border-radius:10px;"></div></div>
    </div>
</div>

<div id="games" class="tab-content">
    <div id="g-list" style="width: 100%;">
        <div class="card" onclick="openGame('mines')">üí£ –ú–ò–ù–´</div>
        <div class="card" onclick="openGame('ladder')">ü™ú –õ–ï–°–ï–ù–ö–ê</div>
        <div class="card" onclick="openGame('bj')">üÉè –ë–õ–≠–ö–î–ñ–ï–ö</div>
    </div>
    <div id="g-play" style="display:none; width: 100%;">
        <h2 id="g-title" style="color: var(--blue); margin-bottom:10px;">–ò–ì–†–ê</h2>
        <div id="g-area" style="width:100%"></div>
        <div id="g-status" style="color: var(--gold); font-weight: 900; margin: 15px; text-align:center;"></div>
        <button id="cash-btn" class="btn-gold" style="display:none;" onclick="cashout()">–ó–ê–ë–†–ê–¢–¨</button>
        <button id="back-btn" class="btn-blue" style="background:#333; margin-top:10px" onclick="closeGame()">–ù–ê–ó–ê–î</button>
    </div>
</div>

<div id="shop" class="tab-content">
    <div class="card" style="border-color: var(--gold); text-align:center;">
        <h3 style="color: var(--gold);">üì¶ –õ–£–¢–ë–û–ö–°</h3>
        <div id="case-anim">üíé</div>
        <button class="btn-gold" id="case-btn" onclick="openCase()">–û–¢–ö–†–´–¢–¨ (500 TON)</button>
    </div>
    <div class="card" style="text-align:center;">
        <h3>üëë ELITE VIP</h3>
        <p style="font-size:12px;">–ö–ª–∏–∫: 1.0 | –≠–Ω–µ—Ä–≥–∏—è: 25,000</p>
        <button class="btn-blue" onclick="window.location.href='https://t.me/fresei'">–ö–£–ü–ò–¢–¨ –£ @FRESEI</button>
    </div>
</div>

<div id="profile" class="tab-content">
    <div class="card">
        <h3>–°–¢–ê–¢–ò–°–¢–ò–ö–ê</h3>
        <p>–ò–≥—Ä —Å—ã–≥—Ä–∞–Ω–æ: <span id="stat-total">0</span></p>
        <p>–ü–æ–±–µ–¥: <span id="stat-wins">0</span></p>
        <p>–°—Ç–∞—Ç—É—Å: <span id="stat-vip">–û–±—ã—á–Ω—ã–π</span></p>
    </div>
    <div id="admin-panel" style="display:none; width:100%">
        <div class="card" style="border: 2px solid red;">
            <h3 style="color:red">–ê–î–ú–ò–ù –ü–ê–ù–ï–õ–¨</h3>
            <input type="number" id="adm-id" placeholder="ID –∏–≥—Ä–æ–∫–∞">
            <input type="number" id="adm-sum" placeholder="–°—É–º–º–∞ TON">
            <button class="btn-gold" onclick="adminAdd('ton')">–í–´–î–ê–¢–¨ TON</button>
            <button class="btn-blue" style="margin-top:5px" onclick="adminAdd('vip')">–í–´–î–ê–¢–¨ VIP</button>
        </div>
    </div>
</div>

<div class="menu">
    <div class="menu-item active-nav" onclick="tab('farm', this)"><b>‚õè</b>–ö–ª–∏–∫</div>
    <div class="menu-item" onclick="tab('games', this)"><b>üé≤</b>–ò–≥—Ä—ã</div>
    <div class="menu-item" onclick="tab('shop', this)"><b>üõí</b>–ú–∞—Ä–∫–µ—Ç</div>
    <div class="menu-item" onclick="tab('profile', this)"><b>üë§</b>–ü—Ä–æ—Ñ–∏–ª—å</div>
</div>

<script>
    const MY_ID = 8388334620;
    let db = JSON.parse(localStorage.getItem('ton_v5')) || {
        bal: 1000, nrg: 25000, vip: false, last: Date.now(),
        g_total: 0, g_wins: 0
    };

    function save() { localStorage.setItem('ton_v5', JSON.stringify(db)); }

    function update() {
        let maxN = db.vip ? 25000 : 2500;
        let dt = (Date.now() - db.last) / 1000;
        if(db.nrg < maxN) db.nrg = Math.min(maxN, db.nrg + (dt * 5));
        db.last = Date.now();

        document.getElementById('bal').innerText = Math.floor(db.bal);
        document.getElementById('nrg-txt').innerText = Math.floor(db.nrg) + "/" + maxN;
        document.getElementById('nrg-fill').style.width = (db.nrg / maxN * 100) + "%";
        document.getElementById('stat-total').innerText = db.g_total;
        document.getElementById('stat-wins').innerText = db.g_wins;
        
        if(db.vip) {
            document.getElementById('vip-badge').innerHTML = '<span style="color:gold; font-weight:bold; font-size:12px;">GOLD VIP</span>';
            document.getElementById('stat-vip').innerText = "ELITE –ú–ê–ì–ù–ê–¢";
        }
        if(MY_ID === 8388334620) document.getElementById('admin-panel').style.display = 'block';
        save();
    }

    // –¢–ê–ü
    document.getElementById('coin').onclick = (e) => {
        if(db.nrg >= 1) {
            let p = db.vip ? 1.0 : 0.5;
            db.nrg--; db.bal += p;
            update();
        }
    };

    // –õ–£–¢–ë–û–ö–° –° –ê–ù–ò–ú–ê–¶–ò–ï–ô
    function openCase() {
        if(db.bal < 500) return alert("–ú–∞–ª–æ TON!");
        db.bal -= 500;
        let btn = document.getElementById('case-btn');
        let box = document.getElementById('case-anim');
        btn.disabled = true;
        box.style.display = 'flex';
        box.classList.add('rolling');
        
        setTimeout(() => {
            box.classList.remove('rolling');
            let r = Math.random() * 100;
            let win = "";
            if(r > 95) { db.vip = true; win = "üëë VIP"; }
            else if(r > 70) { db.bal += 2000; win = "üí∞ 2000 TON"; }
            else { db.bal += 100; win = "üí© 100 TON"; }
            box.innerText = win;
            setTimeout(() => {
                box.style.display = 'none';
                box.innerText = "üíé";
                btn.disabled = false;
                update();
            }, 2000);
        }, 1500);
    }

    // –ò–ì–†–´
    let curG = { active: false, bet: 0, mult: 1, type: '' };
    function openGame(t) {
        document.getElementById('g-list').style.display = 'none';
        document.getElementById('g-play').style.display = 'block';
        let area = document.getElementById('g-area');
        area.innerHTML = '';
        curG.type = t;
        
        if(t === 'mines') {
            document.getElementById('g-title').innerText = "–ú–ò–ù–´";
            area.innerHTML = `<input id="g-bet" type="number" placeholder="–°—Ç–∞–≤–∫–∞"><button class="btn-blue" onclick="startMines()">–ò–ì–†–ê–¢–¨</button><div id="m-grid" class="mines-grid" style="margin-top:10px"></div>`;
        } else if(t === 'ladder') {
            document.getElementById('g-title').innerText = "–õ–ï–°–ï–ù–ö–ê";
            area.innerHTML = `<input id="g-bet" type="number" placeholder="–°—Ç–∞–≤–∫–∞"><button class="btn-blue" onclick="startLadder()">–ò–ì–†–ê–¢–¨</button><div id="l-grid" style="margin-top:10px"></div>`;
        } else if(t === 'bj') {
            document.getElementById('g-title').innerText = "–ë–õ–≠–ö–î–ñ–ï–ö";
            area.innerHTML = `<input id="g-bet" type="number" placeholder="–°—Ç–∞–≤–∫–∞"><button class="btn-blue" onclick="startBJ()">–ò–ì–†–ê–¢–¨</button>
            <div id="bj-table" style="display:none; text-align:center; margin-top:10px">
                <p>–î–∏–ª–µ—Ä: <span id="bj-d">?</span></p>
                <p>–í—ã: <span id="bj-p">0</span></p>
                <button class="btn-blue" onclick="bjHit()">–ï–©–ï</button>
                <button class="btn-gold" onclick="bjStand()">–°–¢–û–ü</button>
            </div>`;
        }
    }

    // MINES
    function startMines() {
        let b = getBet(); if(!b) return;
        curG.active = true; curG.bombs = []; curG.mult = 1;
        while(curG.bombs.length < 4) { let r = Math.floor(Math.random()*25); if(!curG.bombs.includes(r)) curG.bombs.push(r); }
        let grid = document.getElementById('m-grid'); grid.innerHTML = '';
        for(let i=0; i<25; i++) {
            let c = document.createElement('div'); c.className = 'cell'; c.innerText = 'üíé';
            c.onclick = () => {
                if(!curG.active || c.style.background !== '') return;
                if(curG.bombs.includes(i)) { c.innerText='üí•'; c.style.background='red'; gameEnd(false); }
                else { c.innerText='üíé'; c.style.background='green'; curG.mult += 0.5; document.getElementById('cash-btn').style.display='block'; }
            }; grid.appendChild(c);
        }
    }

    // LADDER
    function startLadder() {
        let b = getBet(); if(!b) return;
        curG.active = true; curG.mult = 1; curG.step = 0;
        let grid = document.getElementById('l-grid'); grid.innerHTML = '';
        for(let i=0; i<5; i++) {
            let row = document.createElement('div'); row.className = 'ladder-row';
            row.innerHTML = `<button class="btn-blue" onclick="stepL(${i},0,this)">?</button><button class="btn-blue" onclick="stepL(${i},1,this)">?</button>`;
            grid.appendChild(row);
        }
    }
    function stepL(lvl, s, el) {
        if(!curG.active || lvl !== curG.step) return;
        if(Math.random() > 0.5) { el.innerText='üíé'; el.style.background='green'; curG.mult *= 2; curG.step++; document.getElementById('cash-btn').style.display='block'; if(curG.step==5) cashout(); }
        else { el.innerText='üí•'; el.style.background='red'; gameEnd(false); }
    }

    // BLACKJACK
    let bjP = [], bjD = [];
    function startBJ() {
        let b = getBet(); if(!b) return;
        document.getElementById('bj-table').style.display = 'block';
        curG.active = true; bjP = [rC(), rC()]; bjD = [rC()]; renderBJ();
    }
    function rC() { return Math.floor(Math.random()*10)+2; }
    function renderBJ() {
        document.getElementById('bj-p').innerText = bjP.reduce((a,b)=>a+b);
        document.getElementById('bj-d').innerText = bjD.join(', ');
        if(bjP.reduce((a,b)=>a+b) > 21) gameEnd(false);
    }
    function bjHit() { if(!curG.active) return; bjP.push(rC()); renderBJ(); }
    function bjStand() {
        if(!curG.active) return;
        let ds = bjD.reduce((a,b)=>a+b);
        while(ds < 17) { bjD.push(rC()); ds = bjD.reduce((a,b)=>a+b); }
        renderBJ();
        let ps = bjP.reduce((a,b)=>a+b);
        if(ds > 21 || ps > ds) { curG.mult = 2; cashout(); }
        else if(ps === ds) { db.bal += curG.bet; gameEnd(true); }
        else gameEnd(false);
    }

    function getBet() {
        let b = parseFloat(document.getElementById('g-bet').value);
        if(isNaN(b) || b < 1 || b > db.bal) { alert("–ù–µ–≤–µ—Ä–Ω–∞—è —Å—Ç–∞–≤–∫–∞!"); return null; }
        db.bal -= b; curG.bet = b; db.g_total++; update();
        document.getElementById('g-bet').style.display = 'none';
        return b;
    }

    function cashout() {
        db.bal += curG.bet * curG.mult;
        db.g_wins++;
        gameEnd(true);
    }

    function gameEnd(win) {
        curG.active = false;
        document.getElementById('g-status').innerText = win ? "–ü–û–ë–ï–î–ê!" : "–ü–†–û–ò–ì–†–´–®!";
        document.getElementById('cash-btn').style.display = 'none';
        update();
    }

    function closeGame() {
        document.getElementById('g-list').style.display = 'block';
        document.getElementById('g-play').style.display = 'none';
        document.getElementById('g-status').innerText = '';
        update();
    }

    function adminAdd(t) {
        let id = document.getElementById('adm-id').value;
        let sum = parseFloat(document.getElementById('adm-sum').value);
        if(id == MY_ID) {
            if(t === 'ton') db.bal += sum;
            else db.vip = true;
            alert("–£—Å–ø–µ—à–Ω–æ!"); update();
        } else {
            alert("–ò–≥—Ä–æ–∫ —Å —Ç–∞–∫–∏–º ID –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏");
        }
    }

    function tab(id, el) {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('.menu-item').forEach(m => m.classList.remove('active-nav'));
        el.classList.add('active-nav');
    }

    setInterval(update, 1000);
    update();
</script>
</body>
</html>
