<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TON EMPIRE DIAMOND</title>
    <style>
        :root { --blue: #00d2ff; --pink: #3a7bd5; --glass: rgba(255, 255, 255, 0.1); --diamond: linear-gradient(135deg, #00d2ff 0%, #3a7bd5 100%); }
        body { background: #02050a; color: white; font-family: 'Segoe UI', sans-serif; margin: 0; overflow: hidden; height: 100vh; }
        
        /* –°–≤–µ—á–µ–Ω–∏–µ –∏ –ê–ª–º–∞–∑–Ω—ã–π —Å—Ç–∏–ª—å */
        .glass-card { background: var(--glass); backdrop-filter: blur(10px); border: 1px solid rgba(0, 210, 255, 0.3); border-radius: 20px; box-shadow: 0 0 20px rgba(0, 210, 255, 0.1); padding: 15px; margin: 10px 0; width: 90%; }
        .btn-diamond { background: var(--diamond); border: none; color: white; padding: 12px; border-radius: 12px; font-weight: bold; cursor: pointer; text-shadow: 0 0 5px rgba(255,255,255,0.5); box-shadow: 0 0 15px rgba(0, 210, 255, 0.4); width: 100%; transition: 0.2s; }
        .btn-diamond:disabled { opacity: 0.5; cursor: not-allowed; }

        /* –ö–ª–∏–∫ –∞–Ω–∏–º–∞—Ü–∏—è */
        .tap-anim { position: absolute; color: var(--blue); font-weight: 900; font-size: 28px; pointer-events: none; animation: flyUp 0.8s ease-out forwards; z-index: 100; }
        @keyframes flyUp { 0% { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-120px); } }

        .header { padding: 15px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--glass); background: rgba(0,0,0,0.5); }
        .balance { font-size: 24px; font-weight: 900; color: var(--blue); }

        .tab-content { display: none; padding: 20px; height: 75vh; overflow-y: auto; flex-direction: column; align-items: center; }
        .active { display: flex; }

        /* Coin */
        #coin { width: 180px; height: 180px; background: var(--diamond); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 60px; box-shadow: 0 0 40px var(--blue); border: 4px solid #fff; margin: 20px 0; cursor: pointer; }
        
        /* Games Grid */
        .mines-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 6px; margin: 15px 0; }
        .m-cell { background: rgba(255,255,255,0.05); width: 50px; height: 50px; border-radius: 8px; border: 1px solid var(--blue); display: flex; align-items: center; justify-content: center; font-size: 20px; }

        .menu { position: fixed; bottom: 0; width: 100%; display: flex; background: #050a14; padding: 10px 0 30px; border-top: 1px solid var(--blue); }
        .menu-item { flex: 1; text-align: center; color: #666; cursor: pointer; font-size: 11px; }
        .menu-item.active-nav { color: var(--blue); }

        .vip-badge { background: linear-gradient(45deg, #ffd700, #ff8c00); color: black; padding: 2px 8px; border-radius: 5px; font-size: 10px; font-weight: bold; }
    </style>
</head>
<body>

<div class="header">
    <div>
        <div class="balance"><span id="bal">0.00</span> <small>TON</small></div>
        <div id="pps" style="color: #00ff88; font-size: 11px;">+0.00/s</div>
    </div>
    <div id="vip-info"></div>
</div>

<div id="farm" class="tab-content active">
    <div id="coin">üíé</div>
    <div class="glass-card" style="text-align: center;">
        <div style="display:flex; justify-content:space-between;"><span>‚ö° –≠–Ω–µ—Ä–≥–∏—è</span><span id="nrg-txt">0/0</span></div>
        <div style="width:100%; height:8px; background:#111; border-radius:5px; margin-top:5px;">
            <div id="nrg-fill" style="height:100%; background:var(--blue); border-radius:5px; transition: 0.2s;"></div>
        </div>
    </div>
</div>

<div id="mine" class="tab-content">
    <div class="glass-card">
        <h4>GPU RTX 3060</h4>
        <p>–î–æ—Ö–æ–¥: 0.05/—Å–µ–∫ | –¶–µ–Ω–∞: 500 TON</p>
        <button class="btn-diamond" onclick="buyMine(0)">–ö–£–ü–ò–¢–¨</button>
    </div>
    <div class="glass-card">
        <h4>ASIC S19</h4>
        <p>–î–æ—Ö–æ–¥: 0.10/—Å–µ–∫ | –¶–µ–Ω–∞: 1000 TON</p>
        <button class="btn-diamond" onclick="buyMine(1)">–ö–£–ü–ò–¢–¨</button>
    </div>
    <div class="glass-card">
        <h4>SERVER CLOUD</h4>
        <p>–î–æ—Ö–æ–¥: 0.20/—Å–µ–∫ | –¶–µ–Ω–∞: 1500 TON</p>
        <button class="btn-diamond" onclick="buyMine(2)">–ö–£–ü–ò–¢–¨</button>
    </div>
    <div class="glass-card" style="border-color: gold;">
        <h4 style="color: gold;">ELITE ANTMINER</h4>
        <p>–î–æ—Ö–æ–¥: 100.0/—Å–µ–∫ | –¶–µ–Ω–∞: 2.0M TON</p>
        <button class="btn-diamond" onclick="buyMine(3)">–ö–£–ü–ò–¢–¨</button>
    </div>
</div>

<div id="games" class="tab-content">
    <div id="g-list" style="width:100%">
        <div class="glass-card" onclick="openG('mines')">üí£ MINES (ALMAZ)</div>
        <div class="glass-card" onclick="openG('ladder')">ü™ú LADDER (X1000)</div>
        <div class="glass-card" onclick="openG('bj')">üÉè BLACKJACK</div>
    </div>
    <div id="g-play" style="display:none; width:100%">
        <h3 id="g-title" style="color:var(--blue)">–ò–ì–†–ê</h3>
        <div id="g-area"></div>
        <div id="g-status" style="margin:10px; font-weight:bold; color:gold"></div>
        <button id="cash-btn" class="btn-diamond" style="display:none; background:#00ff88; margin-bottom:10px" onclick="cashout()">–ó–ê–ë–†–ê–¢–¨</button>
        <button id="back-btn" class="btn-diamond" style="background:#444" onclick="closeG()">–ù–ê–ó–ê–î</button>
    </div>
</div>

<div id="profile" class="tab-content">
    <div id="prof-vip"></div>
    <div class="glass-card">
        <h3>–†–ï–§–ï–†–ê–õ–¨–ù–ê–Ø –°–ò–°–¢–ï–ú–ê</h3>
        <p style="font-size:12px">–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞ –∏ –ø–æ–ª—É—á–∏ 15% –µ–≥–æ –∫–ª–∏–∫–æ–≤!</p>
        <input class="btn-diamond" style="background:#111" readonly value="t.me/ton_emp_bot?ref=8388334620">
    </div>
    <button class="btn-diamond" style="background:#ef4444; margin-top:20px" onclick="openAdmin()">–ê–î–ú–ò–ù –ü–ê–ù–ï–õ–¨</button>
</div>

<div class="menu">
    <div class="menu-item active-nav" onclick="tab('farm', this)">üíé<br>–ö–ª–∏–∫</div>
    <div class="menu-item" onclick="tab('mine', this)">üöÄ<br>–ú–∞–π–Ω–∏–Ω–≥</div>
    <div class="menu-item" onclick="tab('games', this)">üé≤<br>–ò–≥—Ä—ã</div>
    <div class="menu-item" onclick="tab('profile', this)">üë§<br>–ü—Ä–æ—Ñ–∏–ª—å</div>
</div>

<script>
    let db = JSON.parse(localStorage.getItem('ton_diamond_save')) || {
        bal: 500, nrg: 2500, vip: false, clk: 0, 
        mines_bought: [0,0,0,0], pps: 0, last: Date.now()
    };

    function save() { localStorage.setItem('ton_diamond_save', JSON.stringify(db)); }

    function update() {
        let now = Date.now();
        let dt = (now - db.last) / 1000;
        db.bal += db.pps * dt;
        
        let maxN = db.vip ? 25000 : 2500;
        if(db.nrg < maxN) db.nrg = Math.min(maxN, db.nrg + (dt * 5));

        document.getElementById('bal').innerText = db.bal.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
        document.getElementById('nrg-txt').innerText = Math.floor(db.nrg) + " / " + maxN;
        document.getElementById('nrg-fill').style.width = (db.nrg / maxN * 100) + "%";
        document.getElementById('pps').innerText = "+" + db.pps.toFixed(2) + "/s";
        
        if(db.vip) {
            document.getElementById('vip-info').innerHTML = '<span class="vip-badge">VIP –ê–ö–ö–ê–£–ù–¢</span>';
            document.getElementById('prof-vip').innerHTML = '<div class="glass-card" style="border-color:gold">üèÜ –í–´ ELITE –ò–ì–†–û–ö</div>';
        }
        db.last = now;
        save();
    }

    // –¢–ê–ü–ê–õ–ö–ê –° –ê–ù–ò–ú–ê–¶–ò–ï–ô
    document.getElementById('coin').onclick = (e) => {
        if(db.nrg >= 1) {
            let pwr = db.vip ? 1.0 : 0.5;
            db.nrg--; db.bal += pwr;
            
            let a = document.createElement('div');
            a.className = 'tap-anim';
            a.innerText = '+' + pwr;
            a.style.left = e.pageX + 'px';
            a.style.top = e.pageY + 'px';
            document.body.appendChild(a);
            setTimeout(() => a.remove(), 800);
            update();
        }
    };

    // –ú–ê–ô–ù–ò–ù–ì
    const M_DATA = [
        {p: 500, i: 0.05}, {p: 1000, i: 0.10}, {p: 1500, i: 0.20}, {p: 2000000, i: 100}
    ];
    function buyMine(id) {
        if(db.bal >= M_DATA[id].p) {
            db.bal -= M_DATA[id].p;
            db.pps += M_DATA[id].i;
            alert("–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –î–æ—Ö–æ–¥ —É–≤–µ–ª–∏—á–µ–Ω.");
            update();
        } else alert("–ù–µ —Ö–≤–∞—Ç–∞–µ—Ç TON!");
    }

    // –ò–ì–†–´
    let cur = { active: false, bet: 0, mult: 1 };

    function openG(t) {
        document.getElementById('g-list').style.display = 'none';
        document.getElementById('g-play').style.display = 'block';
        let area = document.getElementById('g-area');
        area.innerHTML = '';
        
        if(t === 'mines') {
            document.getElementById('g-title').innerText = "DIAMOND MINES";
            area.innerHTML = `
                <input id="m-bet" class="btn-diamond" style="background:#111; margin-bottom:10px;" type="number" placeholder="–°–¢–ê–í–ö–ê">
                <button id="start-m-btn" class="btn-diamond" onclick="startMines()">–ò–ì–†–ê–¢–¨</button>
                <div id="m-grid" class="mines-grid"></div>
            `;
        } else if(t === 'ladder') {
            document.getElementById('g-title').innerText = "DIAMOND LADDER";
            area.innerHTML = `
                <input id="l-bet" class="btn-diamond" style="background:#111; margin-bottom:10px;" type="number" placeholder="–°–¢–ê–í–ö–ê">
                <button id="start-l-btn" class="btn-diamond" onclick="startLadder()">–ù–ê–ß–ê–¢–¨ –í–û–°–•–û–ñ–î–ï–ù–ò–ï</button>
                <div id="l-grid" style="display:flex; flex-direction:column-reverse; gap:5px; margin-top:15px;"></div>
            `;
        } else if(t === 'bj') {
            document.getElementById('g-title').innerText = "BLACKJACK";
            area.innerHTML = `
                <input id="bj-bet" class="btn-diamond" style="background:#111; margin-bottom:10px;" type="number" placeholder="–°–¢–ê–í–ö–ê">
                <button id="start-bj-btn" class="btn-diamond" onclick="startBJ()">–ò–ì–†–ê–¢–¨</button>
                <div id="bj-table" style="margin-top:10px; display:none;">
                    <p>–î–∏–ª–µ—Ä: <span id="d-cards"></span> (<span id="d-score">0</span>)</p>
                    <p>–í—ã: <span id="p-cards"></span> (<span id="p-score">0</span>)</p>
                    <div style="display:flex; gap:10px;">
                        <button class="btn-diamond" onclick="bjHit()">–ï–©–ï</button>
                        <button class="btn-diamond" style="background:#ff8c00" onclick="bjStand()">–°–¢–û–ü</button>
                    </div>
                </div>
            `;
        }
    }

    // –ú–ò–ù–´ –§–ò–ö–°
    function startMines() {
        if(cur.active) return;
        let b = parseFloat(document.getElementById('m-bet').value);
        if(isNaN(b) || b < 1 || b > db.bal) return alert("–û—à–∏–±–∫–∞ —Å—Ç–∞–≤–∫–∏!");
        
        db.bal -= b; cur = { active: true, bet: b, mult: 1, bombs: [] };
        document.getElementById('start-m-btn').disabled = true;
        document.getElementById('back-btn').style.display = 'none';

        while(cur.bombs.length < 4) {
            let r = Math.floor(Math.random()*25);
            if(!cur.bombs.includes(r)) cur.bombs.push(r);
        }

        let grid = document.getElementById('m-grid'); grid.innerHTML = '';
        for(let i=0; i<25; i++) {
            let cell = document.createElement('div'); cell.className = 'm-cell'; cell.innerText = 'üíé';
            cell.onclick = () => {
                if(!cur.active || cell.style.background !== '') return;
                if(cur.bombs.includes(i)) {
                    cell.innerText = 'üí£'; cell.style.background = 'red';
                    cur.active = false; alert("–ë–û–ú–ë–ê! –ü—Ä–æ–∏–≥—Ä—ã—à."); closeG();
                } else {
                    cell.style.background = 'var(--blue)'; cur.mult += 0.5;
                    document.getElementById('g-status').innerText = "–ú–ù–û–ñ–ò–¢–ï–õ–¨: x" + cur.mult.toFixed(1);
                    document.getElementById('cash-btn').style.display = 'block';
                }
            };
            grid.appendChild(cell);
        }
        update();
    }

    // –õ–ï–°–ï–ù–ö–ê
    function startLadder() {
        if(cur.active) return;
        let b = parseFloat(document.getElementById('l-bet').value);
        if(isNaN(b) || b < 1 || b > db.bal) return;
        db.bal -= b; cur = { active: true, bet: b, mult: 1, level: 0 };
        document.getElementById('start-l-btn').disabled = true;
        let grid = document.getElementById('l-grid'); grid.innerHTML = '';
        for(let i=0; i<8; i++) {
            let row = document.createElement('div'); row.style = "display:grid; grid-template-columns: 1fr 1fr; gap:10px;";
            row.innerHTML = `<button class="btn-diamond" style="background:rgba(255,255,255,0.1)" onclick="stepL(${i}, 0, this)">?</button>
                             <button class="btn-diamond" style="background:rgba(255,255,255,0.1)" onclick="stepL(${i}, 1, this)">?</button>`;
            grid.appendChild(row);
        }
        update();
    }
    function stepL(lvl, side, el) {
        if(!cur.active || lvl !== cur.level) return;
        let trap = Math.floor(Math.random()*2);
        if(side === trap) {
            el.style.background = 'red'; el.innerText = 'üí•'; cur.active = false; alert("–£–ø–∞–ª–∏!"); closeG();
        } else {
            el.style.background = 'green'; el.innerText = 'üíé'; cur.mult *= 2; cur.level++;
            document.getElementById('g-status').innerText = "–ú–ù–û–ñ–ò–¢–ï–õ–¨: x" + cur.mult;
            document.getElementById('cash-btn').style.display = 'block';
        }
    }

    // –ë–õ–≠–ö–î–ñ–ï–ö
    let bj = { p: [], d: [], deck: [] };
    function startBJ() {
        let b = parseFloat(document.getElementById('bj-bet').value);
        if(isNaN(b) || b < 1 || b > db.bal) return;
        db.bal -= b; cur = { active: true, bet: b };
        document.getElementById('start-bj-btn').style.display = 'none';
        document.getElementById('bj-table').style.display = 'block';
        bj.p = [rC(), rC()]; bj.d = [rC()]; renderBJ();
    }
    function rC() { return Math.floor(Math.random()*10)+2; }
    function renderBJ() {
        document.getElementById('p-cards').innerText = bj.p.join(', ');
        document.getElementById('d-cards').innerText = bj.d.join(', ');
        let ps = bj.p.reduce((a,b)=>a+b); document.getElementById('p-score').innerText = ps;
        if(ps > 21) { alert("–ü–µ—Ä–µ–±–æ—Ä!"); closeG(); }
    }
    function bjHit() { bj.p.push(rC()); renderBJ(); }
    function bjStand() {
        let ds = bj.d.reduce((a,b)=>a+b);
        while(ds < 17) { bj.d.push(rC()); ds = bj.d.reduce((a,b)=>a+b); }
        let ps = bj.p.reduce((a,b)=>a+b);
        renderBJ();
        if(ds > 21 || ps > ds) { db.bal += cur.bet * 2; alert("–ü–û–ë–ï–î–ê!"); }
        else if(ps === ds) { db.bal += cur.bet; alert("–ù–ò–ß–¨–Ø"); }
        else alert("–ü–†–û–ò–ì–†–´–®");
        closeG(); update();
    }

    function cashout() {
        if(!cur.active) return;
        db.bal += cur.bet * cur.mult;
        cur.active = false;
        alert("–ó–∞–±—Ä–∞–ª–∏: " + (cur.bet * cur.mult).toFixed(2));
        closeG(); update();
    }

    function closeG() {
        cur.active = false;
        document.getElementById('g-list').style.display = 'block';
        document.getElementById('g-play').style.display = 'none';
        document.getElementById('g-status').innerText = '';
        document.getElementById('cash-btn').style.display = 'none';
        document.getElementById('back-btn').style.display = 'block';
    }

    function tab(id, el) {
        document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
        document.getElementById(id).classList.add('active');
        document.querySelectorAll('.menu-item').forEach(m => m.classList.remove('active-nav'));
        el.classList.add('active-nav');
    }

    function openAdmin() {
        let p = prompt("ID:");
        if(p == "8388334620") {
            let cmd = prompt("1-TON, 2-VIP");
            if(cmd == "1") db.bal += 1000000;
            if(cmd == "2") db.vip = true;
            update();
        }
    }

    setInterval(update, 1000);
    update();
</script>
</body>
</html>
